{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function getImagesByQuery(query, page = 1) {\n    if (!query) {\n        return;\n    }\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"14797936-c0ac273b2bc1360021fe4ee91\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: false,\n            page: page,\n            per_page: 15\n            }\n        })\n        return response.data;\n    } catch (error) {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: error.message });\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport let bigImg = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250, captionPosition: 'outside' });\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst more = document.querySelector(\".loadmore\")\n\nexport function createGallery(images) {\n    const markUp = images.map((pic) => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${pic.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" width=\"360\">\n        </a>\n        <div class=\"gallery-stats\">\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Likes</p>\n        <p class=\"gallery-count\">${pic.likes}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Views</p>\n        <p class=\"gallery-count\">${pic.views}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Comments</p>\n        <p class=\"gallery-count\">${pic.comments}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Downloads</p>\n        <p class=\"gallery-count\">${pic.downloads}</p></div>\n        </div>\n        </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML(\"beforeend\", markUp);\n    bigImg.refresh();\n};\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    more.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    more.classList.add(\"hidden\");\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\n\nconst form = document.querySelector(\".form\");\nlet page = 1;\nconst more = document.querySelector(\".loadmore\");\nlet input;\nlet totalImages;\nlet cardHeight;\n\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    input = event.target.elements['search-text'];\n    if (input.value === \"\") {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: \"Please type in something\" });\n        return;\n    };\n    page = 1;\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n\n    getImagesByQuery(input.value, page)\n        .then(data => {\n            if (data.length === 0) {\n                iziToast.show({ color: \"red\", position: \"topRight\", message: \"Sorry, there are no images matching your search query. Please try again!\" });\n            } else {\n                totalImages = data.totalHits;\n                createGallery(data.hits);\n                cardHeight = document.querySelector(\".gallery-item\").getBoundingClientRect().height;\n            }\n        }).finally((data) => {\n            hideLoader();\n            if (!(page > totalImages / 15)) {\n                showLoadMoreButton();\n            }\n        });\n});\n\nmore.addEventListener(\"click\", (event) => {\n    page++;\n    showLoader();\n    getImagesByQuery(input.value, page)\n        .then(data => {\n            if (page > data.totalHits / 15) {\n                hideLoadMoreButton();\n                iziToast.show({ color: \"red\", position: \"topRight\", message: \"We're sorry, but you've reached the end of search results.\" });\n            }\n            createGallery(data.hits);\n            window.scrollBy({\n                top: cardHeight*2,\n                left: 0,\n                behavior: \"smooth\",\n            });\n        }).finally(() => {\n            hideLoader();\n        });\n});\n"],"names":["getImagesByQuery","query","page","axios","error","bigImg","SimpleLightbox","gallery","loader","more","createGallery","images","markUp","pic","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","totalImages","cardHeight","event","iziToast","data"],"mappings":"owBAGO,eAAeA,EAAiBC,EAAOC,EAAO,EAAG,CACpD,GAAKD,EAGL,GAAI,CAYA,OAXiB,MAAME,EAAM,IAAI,2BAA4B,CAC7D,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACT,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,SAAS,KAAK,CAAE,MAAO,MAAO,SAAU,WAAY,QAASA,EAAM,OAAO,CAAE,CAC/E,CACL,CCpBO,IAAIC,EAAS,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,gBAAiB,SAAW,CAAA,EAC3H,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,WAAW,EAExC,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAKE,GAChB;AAAA,wCACyBA,EAAI,aAAa;AAAA,wCACjBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,mCAIvCA,EAAI,KAAK;AAAA;AAAA,mCAETA,EAAI,KAAK;AAAA;AAAA,mCAETA,EAAI,QAAQ;AAAA;AAAA,mCAEZA,EAAI,SAAS;AAAA;AAAA,cAG3C,EAAE,KAAK,EAAE,EACVN,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CP,EAAO,QAAO,CAClB,CAEO,SAASS,GAAe,CAC3BP,EAAQ,UAAY,EACxB,CAEO,SAASQ,GAAa,CACzBP,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASQ,GAAa,CACzBR,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASS,GAAqB,CACjCR,EAAK,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASS,GAAqB,CACjCT,EAAK,UAAU,IAAI,QAAQ,CAC/B,CC5CA,MAAMU,EAAO,SAAS,cAAc,OAAO,EAC3C,IAAIjB,EAAO,EACX,MAAMO,EAAO,SAAS,cAAc,WAAW,EAC/C,IAAIW,EACAC,EACAC,EAGJH,EAAK,iBAAiB,SAAWI,GAAU,CAGvC,GAFAA,EAAM,eAAc,EACpBH,EAAQG,EAAM,OAAO,SAAS,aAAa,EACvCH,EAAM,QAAU,GAAI,CACpBI,EAAS,KAAK,CAAE,MAAO,MAAO,SAAU,WAAY,QAAS,0BAA0B,CAAE,EACzF,MACR,CACItB,EAAO,EACPY,IACAC,IACAG,IAEAlB,EAAiBoB,EAAM,MAAOlB,CAAI,EAC7B,KAAKuB,GAAQ,CACNA,EAAK,SAAW,EAChBD,EAAS,KAAK,CAAE,MAAO,MAAO,SAAU,WAAY,QAAS,0EAA0E,CAAE,GAEzIH,EAAcI,EAAK,UACnBf,EAAce,EAAK,IAAI,EACvBH,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAE7F,CAAS,EAAE,QAASG,GAAS,CACjBT,IACMd,EAAOmB,EAAc,IACvBJ,GAEhB,CAAS,CACT,CAAC,EAEDR,EAAK,iBAAiB,QAAUc,GAAU,CACtCrB,IACAa,IACAf,EAAiBoB,EAAM,MAAOlB,CAAI,EAC7B,KAAKuB,GAAQ,CACNvB,EAAOuB,EAAK,UAAY,KACxBP,IACAM,EAAS,KAAK,CAAE,MAAO,MAAO,SAAU,WAAY,QAAS,4DAA4D,CAAE,GAE/Hd,EAAce,EAAK,IAAI,EACvB,OAAO,SAAS,CACZ,IAAKH,EAAW,EAChB,KAAM,EACN,SAAU,QAC1B,CAAa,CACb,CAAS,EAAE,QAAQ,IAAM,CACbN,GACZ,CAAS,CACT,CAAC"}