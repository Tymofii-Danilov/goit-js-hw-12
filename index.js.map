{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function getImagesByQuery(query, page = 1) {\n    if (!query) {\n        return;\n    }\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"14797936-c0ac273b2bc1360021fe4ee91\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: page,\n            per_page: 15\n            }\n        })\n        return response.data;\n    } catch (error) {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: error.message });\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport let bigImg = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250, captionPosition: 'outside' });\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst more = document.querySelector(\".loadmore\")\n\nexport function createGallery(images) {\n    const markUp = images.map((pic) => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${pic.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" width=\"360\">\n        </a>\n        <div class=\"gallery-stats\">\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Likes</p>\n        <p class=\"gallery-count\">${pic.likes}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Views</p>\n        <p class=\"gallery-count\">${pic.views}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Comments</p>\n        <p class=\"gallery-count\">${pic.comments}</p></div>\n        <div class=\"gallery-count-wrap\"><p class=\"gallery-counter\">Downloads</p>\n        <p class=\"gallery-count\">${pic.downloads}</p></div>\n        </div>\n        </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML(\"beforeend\", markUp);\n    bigImg.refresh();\n};\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    more.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    more.classList.add(\"hidden\");\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\n\nconst form = document.querySelector(\".form\");\nconst more = document.querySelector(\".loadmore\");\nlet page = 1;\nlet currentQuery = \"\";\nlet totalImages = 0;\nlet cardHeight = 0;\n\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const input = event.target.elements['search-text'].value.trim();\n    if (!input) {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: \"Please type in something\" });\n        return;\n    };\n\n    page = 1;\n    totalImages = 0;\n    currentQuery = input;\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const result = await getImagesByQuery(currentQuery, page);\n        if (result.hits.length === 0) {\n            iziToast.show({ color: \"red\", position: \"topRight\", message: \"Sorry, there are no images matching your search query. Please try again!\" });\n            return;\n        }\n\n        totalImages = result.totalHits;\n        createGallery(result.hits);\n\n        if (totalImages > 15) {\n            showLoadMoreButton();\n        } else {\n            iziToast.show({ color: \"red\", position: \"topRight\", message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n    } catch (error) {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: error.message });\n    } finally {\n        hideLoader();\n    }\n});\n\nmore.addEventListener(\"click\", async (event) => {\n    if (!currentQuery) return;\n    \n    page++;\n    showLoader();\n    hideLoadMoreButton();\n    \n    try {\n        const result = await getImagesByQuery(currentQuery, page);\n        createGallery(result.hits);\n        const firstCard = document.querySelector(\".gallery-item\");\n        cardHeight = firstCard ? firstCard.getBoundingClientRect().height : 0;\n        window.scrollBy({\n            top: cardHeight*2,\n            behavior: \"smooth\",\n        });\n        \n        if (page >= Math.ceil(totalImages / 15)) {\n            hideLoadMoreButton();\n            iziToast.show({ color: \"red\", position: \"topRight\", message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        iziToast.show({ color: \"red\", position: \"topRight\", message: error.message });\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["getImagesByQuery","query","page","axios","error","iziToast","bigImg","SimpleLightbox","gallery","loader","more","createGallery","images","markUp","pic","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","totalImages","cardHeight","event","input","result","firstCard"],"mappings":"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"}